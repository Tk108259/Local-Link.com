<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Business Details – LocalServe</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body {
      background: linear-gradient(120deg, #e0e7ff 0%, #f8fafc 100%);
      font-family: 'Segoe UI', 'Roboto', Arial, sans-serif;
      margin: 0;
      color: #1a2236;
    }
    .container {
      max-width: 1000px;
      margin: 36px auto;
      background: #fff;
      border-radius: 20px;
      box-shadow: 0 6px 32px rgba(34,60,98,0.13);
      padding: 32px 32px 28px 32px;
      display: flex;
      flex-direction: column;
    }
    .back-link {
      display: inline-block;
      margin-bottom: 22px;
      color: #357edd;
      text-decoration: none;
      font-weight: 500;
      font-size: 16px;
      letter-spacing: 0.3px;
    }
    .back-link:hover { text-decoration: underline; }

    .gallery {
      display: flex;
      gap: 24px;
      align-items: flex-start;
    }
    .gallery-main {
      width: 350px;
      height: 260px;
      border-radius: 14px;
      object-fit: cover;
      box-shadow: 0 2px 16px #e5eaf4;
      background: #f2f5fa;
      border: 1px solid #e5eaf4;
      transition: box-shadow 0.18s;
    }
    .gallery-main:hover {
      box-shadow: 0 4px 24px #c8d7ea;
    }
    .gallery-thumbs {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-left: 8px;
    }
    .gallery-thumb {
      width: 60px;
      height: 48px;
      border-radius: 7px;
      object-fit: cover;
      cursor: pointer;
      border: 2.5px solid transparent;
      background: #f1f5fa;
      transition: border 0.15s, box-shadow 0.15s;
    }
    .gallery-thumb.selected,
    .gallery-thumb:hover {
      border: 2.5px solid #7c3aed;
      box-shadow: 0 2px 8px #e0e7ff;
    }
    .info {
      flex: 1;
      margin-left: 40px;
      padding-top: 3px;
      min-width: 260px;
    }
    .info h1 {
      margin-top: 0;
      font-size: 2.15rem;
      font-weight: 700;
      letter-spacing: 0.2px;
      color: #2a2f4f;
      margin-bottom: 8px;
    }
    .stars {
      color: #fbbf24;
      font-size: 1.3rem;
      margin-left: 8px;
      vertical-align: middle;
      letter-spacing: 1px;
    }
    .info .desc {
      margin: 10px 0 9px 0;
      font-size: 1.12rem;
      color: #3b4256;
    }
    .info .price {
      font-size: 1.13rem;
      font-weight: 600;
      color: #7c3aed;
      margin-bottom: 5px;
    }
    .info .service-list {
      margin: 14px 0 18px 0;
      padding-left: 18px;
    }
    .info .service-list ul {
      margin: 0;
      padding: 0 0 0 16px;
      color: #5b6386;
    }
    .info .service-list li {
      margin-bottom: 6px;
      font-size: 1rem;
      letter-spacing: 0.1px;
    }
    .action-btns {
      margin-top: 12px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    .info .action-btns button {
      display: inline-flex;
      align-items: center;
      background: #7c3aed;
      color: white;
      border: none;
      border-radius: 9px;
      padding: 13px 26px;
      font-size: 16px;
      font-weight: 600;
      margin-right: 12px;
      margin-bottom: 8px;
      cursor: pointer;
      box-shadow: 0 2px 12px #e0e7ff;
      transition: background 0.16s, box-shadow 0.15s;
      gap: 10px;
      letter-spacing: 0.06em;
    }
    .info .action-btns button.whatsapp-btn {
      background: #25D366;
      color: #1a2236;
      font-weight: 700;
      box-shadow: 0 2px 14px #c6f3de;
    }
    .info .action-btns button.whatsapp-btn:hover {
      background: #128C7E;
      color: #fff;
    }
    .info .action-btns .wa-icon {
      width: 22px; height: 22px; display: inline-block;
      vertical-align: middle;
      margin-right: 7px;
      filter: drop-shadow(0 0 2px #128c7e42);
    }
    .info .action-btns button:hover:not(.whatsapp-btn) {
      background: #4f46e5;
      color: #fff;
    }

    /* Modal styles */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(44, 52, 80, 0.16);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    .modal {
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 4px 32px #7c3aed33;
      padding: 26px 32px 24px 32px;
      text-align: center;
      min-width: 240px;
    }
    .stars-rate {
      color: #cbd5e1;
      font-size: 1.7rem;
      cursor: pointer;
      transition: color 0.12s;
    }
    .stars-rate.selected,
    .stars-rate:hover {
      color: #fbbf24;
    }
    @media (max-width: 900px) {
      .gallery { flex-direction: column; align-items: stretch;}
      .gallery-main { width: 100%; max-width: 100vw; height: 220px;}
      .info { margin-left: 0; margin-top: 20px;}
      .container { padding: 12px; }
    }
    @media (max-width: 550px) {
      .container { padding: 2vw; }
      .info h1 { font-size: 1.15rem;}
    }
  </style>
</head>
<body>
  <div class="container">
    <a href="Business listings.html" class="back-link">&larr; Back to Listings</a>
    <div class="gallery">
      <img src="" class="gallery-main" id="mainImage" alt="Business Image">
      <div class="gallery-thumbs" id="thumbs"></div>
      <div class="info">
        <h1 id="bizName"></h1>
        <div class="desc" id="bizDesc"></div>
        <div class="price" id="bizPrice"></div>
        <div class="service-list" id="bizServices"></div>
        <div class="action-btns">
          <button class="whatsapp-btn" id="contactBtn" onclick="contactBusiness()">
            <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" class="wa-icon" alt="WhatsApp">
            Contact on WhatsApp
          </button>
          <button onclick="window.location.href='Index.html'">Register Your Business</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Modal for rating -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal">
      <h3>Rate the Service</h3>
      <div id="starRating">
        <span class="stars-rate" data-rate="1">&#9733;</span>
        <span class="stars-rate" data-rate="2">&#9733;</span>
        <span class="stars-rate" data-rate="3">&#9733;</span>
        <span class="stars-rate" data-rate="4">&#9733;</span>
        <span class="stars-rate" data-rate="5">&#9733;</span>
      </div>
      <div id="rateMsg" style="margin-top:10px;font-size:15px;color:#357edd;display:none;">Thank you for your feedback!</div>
      <button onclick="closeModal()" style="margin-top:12px;background:#7c3aed;color:white;border:0;padding:8px 18px;border-radius:7px;">Close</button>
    </div>
  </div>
  <script>
    // Demo data: edit as needed!
    const businesses = {
      "Bread Baddie": {
        name: "Bread Baddie",
        images: [
          "images/Baking_Baddie.jpg",
          "images/Scones.jpg",
          "images/Bannana Bread.jpg"
        ],
        stars: 5,
        desc: "We are a bespoke bakery specialising in artisan Banana bread, scones and crunchies.",
        price: "R150",
        services: ["The Best Banana Bread yet", "Scones", "Ranges from cookies and crunchies"],
        whatsapp: "27821234567" // <-- replace with real number!
      },
      "Baking With Hlogi": {
        name: "Baking With Hlogi",
        images: [
          "images/hlogi_main.jpg",
          "images/hlogi_cake.jpg",
          "images/hlogi_pastry.jpg"
        ],
        stars: 4,
        desc: "Freshly baked treats and custom cakes by Hlogi. Perfect for any occasion!",
        price: "R300 – R800",
        services: ["Custom Cakes", "Pastries", "Event Catering"],
        whatsapp: "27829876543" // <-- replace with real number!
      },
      "SweetBakesSA": {
        name: "SweetBakes SA",
        images: [
          "images/Baking_Hlogi sample.jpg",
          "images/Hlogi_sample1.jpg",
          "images/Hlogi_Sample2.jpg"
        ],
        stars: 4,
        desc: "Delicious baked goods made with love. Birthdays, weddings, more.",
        price: "R300 – R800",
        services: ["Cupcakes", "Wedding Cakes", "Birthday Cakes"],
        whatsapp: "27820001111"
      }
    };

    function getQuery(name) {
      return new URLSearchParams(window.location.search).get(name);
    }
    // Case-insensitive business match
    function findBizKey(query) {
      query = (query||"").replace(/\s+/g, '').toLowerCase();
      return Object.keys(businesses).find(
        k => k.replace(/\s+/g, '').toLowerCase() === query
      );
    }
    const urlBiz = getQuery('biz') || "Bread Baddie";
    let bizKey = findBizKey(urlBiz) || "Bread Baddie";
    const bizData = businesses[bizKey];

    // Fill main image
    const mainImage = document.getElementById('mainImage');
    mainImage.src = (bizData.images && bizData.images.length > 0) ? bizData.images[0] : 'https://placehold.co/350x260?text=No+Image';
    mainImage.onerror = function() { this.src = 'https://placehold.co/350x260?text=No+Image'; };

    // Fill details
    document.getElementById('bizName').innerHTML =
      bizData.name +
      ' <span class="stars">' + "★★★★★☆☆☆☆☆".slice(5-bizData.stars, 10-bizData.stars) + '</span>';
    document.getElementById('bizDesc').innerText = bizData.desc;
    document.getElementById('bizPrice').innerText = bizData.price;
    document.getElementById('bizServices').innerHTML =
      '<ul>' + bizData.services.filter(Boolean).map(s => `<li>${s}</li>`).join('') + '</ul>';

    // Gallery thumbs
    const thumbs = document.getElementById('thumbs');
    thumbs.innerHTML = '';
    if(Array.isArray(bizData.images) && bizData.images.length > 0){
      bizData.images.forEach((img, idx) => {
        let thumb = document.createElement('img');
        thumb.src = img;
        thumb.className = 'gallery-thumb' + (idx === 0 ? ' selected' : '');
        thumb.alt = 'Gallery Image';
        thumb.onclick = function() {
          mainImage.src = img;
          document.querySelectorAll('.gallery-thumb').forEach(t => t.classList.remove('selected'));
          thumb.classList.add('selected');
        };
        thumbs.appendChild(thumb);
      });
    }

    // WhatsApp contact button
    function contactBusiness() {
      if(bizData.whatsapp){
        let msg = encodeURIComponent(`Hi, I'm interested in your services!`);
        let waUrl = `https://wa.me/${bizData.whatsapp}?text=${msg}`;
        window.open(waUrl, '_blank');
      } else {
        alert('WhatsApp contact not available.');
      }
    }

    // STAR RATING MODAL
    document.querySelectorAll('.stars-rate').forEach(star => {
      star.addEventListener('mouseenter', function() {
        let rate = parseInt(this.getAttribute('data-rate'));
        document.querySelectorAll('.stars-rate').forEach(s => {
          if (parseInt(s.getAttribute('data-rate')) <= rate)
            s.classList.add('selected');
          else
            s.classList.remove('selected');
        });
      });
      star.addEventListener('mouseleave', function() {
        document.querySelectorAll('.stars-rate').forEach(s => s.classList.remove('selected'));
      });
      star.addEventListener('click', function() {
        let rate = parseInt(this.getAttribute('data-rate'));
        document.querySelectorAll('.stars-rate').forEach(s => {
          if (parseInt(s.getAttribute('data-rate')) <= rate)
            s.classList.add('selected');
          else
            s.classList.remove('selected');
        });
        document.getElementById('rateMsg').style.display = 'block';
      });
    });
    document.getElementById('modalOverlay').addEventListener('click', function(e) {
      if (e.target === this) closeModal();
    });
    function closeModal() {
      document.getElementById('modalOverlay').style.display = 'none';
    }
  </script>
</body>
</html>

